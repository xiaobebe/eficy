<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Eficy-core</title>
  </head>
  <body>
    <div id="container"></div>

    <!--    <link rel="stylesheet" href="//assets.alicdn.com/g/next/next/1.13.9/next.min.css" />-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.19.0/antd.css" />

    <script src="https://cdn.bootcss.com/react/16.9.0-alpha.0/umd/react.development.js"></script>
    <script src="https://cdn.bootcss.com/react-dom/16.9.0-alpha.0/umd/react-dom.development.js"></script>
    <script src="//assets.alicdn.com/g/lazada/static/0.0.5/moment/moment.min.js"></script>
    <!--    <script src="//assets.alicdn.com/g/next/next/1.13.9/next.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/3.19.0/antd.js"></script>
    <script src="http://localhost:9999/index.js"></script>

    <script>
      const controller = Eficy.render(
        {
          views: [
            {
              '#view': 'Alert',
              message: 'Hello this is a Login demo',
              type: 'info',
              showIcon: true,
            },
            {
              '#': 'form',
              '#view': 'Form',
              '#children': [
                {
                  '#view': 'Form.Item',
                  label: 'E-mail',
                  '#children': [
                    {
                      '#': 'input',
                      '#view': 'Input',
                      '#field': {
                        name: 'email',
                        rules: [
                          {
                            type: 'email',
                            message: 'The input is not valid E-mail!',
                          },
                        ],
                      },
                      placeholder: 'username',
                      prefix: {
                        '#view': 'Icon',
                        type: 'user',
                        style: { color: 'rgba(0,0,0,.25)' },
                      },
                    },
                  ],
                },
                {
                  '#view': 'Form.Item',
                  label: 'password',
                  '#children': [
                    {
                      '#view': 'Input.Password',
                      '#field': {
                        name: 'password',
                        rules: [
                          {
                            required: true,
                            message: 'Please input your Password!',
                          },
                        ],
                      },
                      placeholder: 'password',
                      prefix: {
                        '#view': 'Icon',
                        type: 'lock',
                      },
                    },
                  ],
                },
                {
                  '#view': 'Form.Item',
                  '#children': [
                    {
                      '#view': 'Checkbox',
                      '#field': {
                        name: 'remember',
                        valuePropName: 'checked',
                        initialValue: true,
                      },
                      '#content': 'Remember me',
                    },
                    {
                      '#view': 'Button',
                      type: 'primary',
                      htmlType: 'submit',
                      '#content': 'Login',
                    },
                  ],
                },
              ],
            },
          ],
          events: [
            {
              publisher: 'form@onSubmit',
              listeners: [contrl => console.log(contrl)],
            },
          ],
          plugins: ['ant-form'],
        },
        {
          dom: '#container',
          components: window.antd,
        },
      );

      controller.model.update({
        views: [
          {
            '#': 'input',
            placeholder: 'Hello Eficy Change',
          },
        ],
      });
      // setInterval(() => {
      //   controller.model.update({
      //     views: [
      //       {
      //         '#': 'input',
      //         placeholder: 'Hello Eficy Change' + Math.random(),
      //       },
      //     ],
      //   });
      // }, 2000);
    </script>
  </body>
</html>
